## Part2. 분산 데이터

> 저장소와 데이터 검색에 여러 장비가 관여한다면 무슨 일이 일어날까?  
여러 장비 간 분산된 데이터베이스를 필요로 하는 이유는 여러 가지다.

- `확장성` : 데이터 볼륨, 읽기 부하, 쓰기 부하가 단일 장비에서 다룰 수 있는 양보다 커지면 부하를 여러 장비로 분배할 수 있다.
- `내결함성/고가용성` : 장비 하나(또는 여러 장비나 네트워크, 전체 데이터센터)가 죽더라도 애플리케이션이 계속 동작해야 한다면 여러 장비를 사용해 중복성을 제공할 수 있다. 장비 하나가 실패하면 다른 하나가 이어받는다.
- `지연 시간` : 전 세계에 사용자가 있다면 사용자와 지리적으로 가까운 곳의 데이터센터에서 서비스를 제공하기 위해 전 세계 다양한 곳에 서버를 두고 싶을 것이다. 이를 통해 사용자는 네트워크 패킷이 지구를 반 바퀴 돌아서 올 때까지 기다릴 필요가 없다.

<br>

### 고부하로 확장

**[1] 공유 메모리 아키텍처(shared-memory architecture)**

- 더 강력한 장비를 구매하는 것이 가장 간단한 방법이다(`수직확장` 또는 `용량 확장`).
- 많은 CPU, 메모리 칩, 디스크를 하나의 운영체제로 합께 결합하여 빠른 상호연결로 모든 CPU가 메모리나 디스크의 모든 부분에 접근할 수 있다.

**단점**

- 두 배 이상의 비용이 소요된다.
- 병목 현상 때문에 두 배 크기의 장비가 반드시 두 배의 부하를 처리할 수 있는 것은 아니다.
- 하나의 지리적인 위치로 제한된다.

<br>

**[2]** **공유 디스크 아키텍처(shared-disc architecture)**

독립적인 CPU와 RAM을 탑재한 여러 장비를 사용하지만 데이터 저장은 장비 간 공유하는 디스크 배열에 한다.

- 여러 장비는 고속 네트워크로 연결된다.
- 잠금 경합과 오버헤드가 확장성을 제한한다.

<br>

**[3] 비공유 아키텍처(shared-nothing)**

- `수평 확장` 또는 `규모 확장`이라고도 한다.
- `노드` : 데이터베이스 소프트웨어를 수행하는 각 장비나 가상 장비로, 각 노드는 CPU, RAM, 디스크를 독립적으로 사용한다.
- 데이터를 여러 노드에 분산하려면 분산 시스템에서 발생하는 제약 조건과 트레이드오프를 알고 있어야 한다.

**장점**

- 여러 지리적인 영역에 걸쳐 데이터를 분산해 사용자 지연 시간을 줄이고 전체 데이터센터의 손실을 줄일 수 있다.
- 소규모 회사라도 다중 지역 분산 아키텍처가 실현 가능하다.

**단점**

- 대개 부가적인 애플리케이션 복잡도를 야기하고 때로는 사용할 수 있는 데이터 모델의 표현을 제한한다.

<br>

**[4] 복제 대 파티셔닝**

<img width="486" alt="Image" src="https://github.com/user-attachments/assets/48d025c1-8658-4c9a-b651-6883c17246a3" />

| 복제                                                                                                                                               | 파티셔닝 |
|--------------------------------------------------------------------------------------------------------------------------------------------------| --- |
| - 같은 데이터의 복사본을 잠재적으로 다른 위치에 있는 여러 노드에 유지한다.<br> - 복제는 중복성을 제공한다.<br>- 일부 노드가 사용 불가능 상태라면 해당 데이터는 남은 다른 노드를 통해 여전히 제공할 수 있다.<br> - 성능 향상에 도움이 된다. | 큰 데이터베이스를 `파티션`이라는 작은 서브넷으로 나누고 각 파티션은 각기 다른 노드에 할당한다(`샤딩`이라고도 한다). |